<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>Frame</name>
    <events>
        <variable comment="Frame size (long)" constant="1" name="FRAME_LONG" sid="7845801931263286" static="0" type="number">64</variable>
        <variable comment="Frame size (short)" constant="1" name="FRAME_SHORT" sid="3489782081867744" static="0" type="number">6</variable>
        <comment>Firstly, mirror the left half of the frame which is horizontally symmetrical</comment>
        <event-block sid="150355136699659">
            <conditions>
                <condition id="-2" name="On start of layout" sid="3918972181685811" type="System" />
            </conditions>
            <actions>
                <action id="0" name="Call function" sid="6211996646597622" type="Function">
                    <param id="0" name="Name">&quot;resetDotsAndPills&quot;</param>
                    <param id="1" name="Parameter {n}"></param>
                </action>
            </actions>
            <sub-events>
                <variable comment="temporary for size of cloned object" constant="0" name="size" sid="858012323270944" static="0" type="number">0</variable>
                <event-block sid="8827068590894752">
                    <conditions>
                        <condition id="-11" name="For Each" sid="4561548444669283" type="System">
                            <param id="0" name="Object">FrameV</param>
                        </condition>
                        <condition id="-1" name="Compare X" sid="7729453072533978" type="FrameV">
                            <param id="0" name="Comparison">2</param>
                            <param id="1" name="X co-ordinate">LayoutWidth/2-FRAME_LONG/2</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Set value" sid="2141821436049361" type="System">
                            <param id="0" name="Variable">size</param>
                            <param id="1" name="Value">FrameV.Height</param>
                        </action>
                        <action id="-3" name="Create object" sid="9832112213946491" type="System">
                            <param id="0" name="Object to create">FrameV</param>
                            <param id="1" name="Layer">0</param>
                            <param id="2" name="X">LayoutWidth-FrameV.X</param>
                            <param id="3" name="Y">FrameV.Y</param>
                        </action>
                        <action id="-7" name="Set size" sid="6712421011517937" type="FrameV">
                            <param id="0" name="Width">FRAME_SHORT</param>
                            <param id="1" name="Height">size</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="9118293654883475">
                    <conditions>
                        <condition id="-11" name="For Each" sid="1604280302151369" type="System">
                            <param id="0" name="Object">FrameH</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Set value" sid="5528733692463477" type="System">
                            <param id="0" name="Variable">size</param>
                            <param id="1" name="Value">FrameH.Width</param>
                        </action>
                        <action id="-3" name="Create object" sid="7765232857546283" type="System">
                            <param id="0" name="Object to create">FrameH</param>
                            <param id="1" name="Layer">0</param>
                            <param id="2" name="X">LayoutWidth-FrameH.X-FrameH.Width</param>
                            <param id="3" name="Y">FrameH.Y</param>
                        </action>
                        <action id="-7" name="Set size" sid="8523702670807797" type="FrameH">
                            <param id="0" name="Width">size</param>
                            <param id="1" name="Height">FRAME_SHORT</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
        <comment>Tidy up positions and sizes</comment>
        <event-block sid="5574519893889003">
            <conditions>
                <condition id="-2" name="On start of layout" sid="5573256895874813" type="System" />
            </conditions>
            <actions />
            <sub-events>
                <comment>Fix the width, height and position</comment>
                <event-block sid="4905105319129082">
                    <conditions>
                        <condition id="-11" name="For Each" sid="2588963543008078" type="System">
                            <param id="0" name="Object">FrameH</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-6" name="Set height" sid="6629618547237709" type="FrameH">
                            <param id="0" name="Height">FRAME_SHORT</param>
                        </action>
                        <action id="-5" name="Set width" sid="8703940200386184" type="FrameH">
                            <param id="0" name="Width">floor((FrameH.Width+FRAME_LONG/2)/FRAME_LONG) * FRAME_LONG+FRAME_SHORT</param>
                        </action>
                        <action id="-1" name="Set X" sid="6756930528091451" type="Frames">
                            <param id="0" name="X">floor((Frames.X+FRAME_LONG/2)/FRAME_LONG)*FRAME_LONG</param>
                        </action>
                        <action id="-2" name="Set Y" sid="180679803550652" type="Frames">
                            <param id="0" name="Y">floor((Frames.Y+FRAME_LONG/2)/FRAME_LONG)*FRAME_LONG-FRAME_SHORT/2</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Fix the width, height and position</comment>
                <event-block sid="1904675641101792">
                    <conditions>
                        <condition id="-11" name="For Each" sid="5561216808755018" type="System">
                            <param id="0" name="Object">FrameV</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-5" name="Set width" sid="1259088989327272" type="FrameV">
                            <param id="0" name="Width">FRAME_SHORT</param>
                        </action>
                        <action id="-6" name="Set height" sid="3203619815076559" type="FrameV">
                            <param id="0" name="Height">floor((FrameV.Height+FRAME_LONG/2)/FRAME_LONG) * FRAME_LONG+FRAME_SHORT</param>
                        </action>
                        <action id="-1" name="Set X" sid="8743079859260712" type="Frames">
                            <param id="0" name="X">floor((Frames.X+FRAME_LONG/2)/FRAME_LONG)*FRAME_LONG-FRAME_SHORT/2</param>
                        </action>
                        <action id="-2" name="Set Y" sid="3000604736198587" type="Frames">
                            <param id="0" name="Y">floor((Frames.Y+FRAME_LONG/2)/FRAME_LONG)*FRAME_LONG</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
        <comment>Reset all the dots and power pills</comment>
        <event-block sid="7568976397396934">
            <conditions>
                <condition id="0" name="On function" sid="1062135622324306" type="Function">
                    <param id="0" name="Name">&quot;resetDotsAndPills&quot;</param>
                </condition>
            </conditions>
            <actions>
                <action id="-9" name="Destroy" sid="5806063919745809" type="PowerPill" />
                <action id="-9" name="Destroy" sid="618897321707255" type="Dot" />
            </actions>
            <sub-events>
                <comment>Create the four power pills</comment>
                <event-block sid="3242628491625637">
                    <conditions>
                        <condition id="-1" name="Every tick" sid="2123624448737273" type="System" />
                    </conditions>
                    <actions>
                        <action id="-3" name="Create object" sid="2765889096708403" type="System">
                            <param id="0" name="Object to create">PowerPill</param>
                            <param id="1" name="Layer">0</param>
                            <param id="2" name="X">FRAME_LONG/2</param>
                            <param id="3" name="Y">FRAME_LONG*5/2</param>
                        </action>
                        <action id="-3" name="Create object" sid="5609189100977633" type="System">
                            <param id="0" name="Object to create">PowerPill</param>
                            <param id="1" name="Layer">0</param>
                            <param id="2" name="X">FRAME_LONG/2</param>
                            <param id="3" name="Y">FRAME_LONG*19/2</param>
                        </action>
                        <action id="-3" name="Create object" sid="8378507162600072" type="System">
                            <param id="0" name="Object to create">PowerPill</param>
                            <param id="1" name="Layer">0</param>
                            <param id="2" name="X">LayoutWidth-FRAME_LONG/2</param>
                            <param id="3" name="Y">FRAME_LONG*5/2</param>
                        </action>
                        <action id="-3" name="Create object" sid="1183615086845597" type="System">
                            <param id="0" name="Object to create">PowerPill</param>
                            <param id="1" name="Layer">0</param>
                            <param id="2" name="X">LayoutWidth-FRAME_LONG/2</param>
                            <param id="3" name="Y">FRAME_LONG*19/2</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Create all the dots on a grid</comment>
                <event-block sid="4323215844943285">
                    <conditions>
                        <condition id="-10" name="For" sid="7440393898004697" type="System">
                            <param id="0" name="Name">&quot;x&quot;</param>
                            <param id="1" name="Start index">1</param>
                            <param id="2" name="End index">LayoutWidth/FRAME_LONG</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="7201479364326882">
                            <conditions>
                                <condition id="-10" name="For" sid="7206362267687523" type="System">
                                    <param id="0" name="Name">&quot;y&quot;</param>
                                    <param id="1" name="Start index">2</param>
                                    <param id="2" name="End index">LayoutHeight/FRAME_LONG-1</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <comment>This test stops dots appearing where the enclosed boxes are on the second row of the maze</comment>
                                <event-block any="1" sid="6519965099285918">
                                    <conditions>
                                        <condition id="-8" inverted="1" name="Compare two values" sid="4508903600560635" type="System">
                                            <param id="0" name="First value">loopindex(&quot;y&quot;) </param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Second value">3</param>
                                        </condition>
                                        <condition id="-8" inverted="1" name="Compare two values" sid="3311287089549686" type="System">
                                            <param id="0" name="First value">(loopindex(&quot;x&quot;) = 2)  | (loopindex(&quot;x&quot;) = 4) | (loopindex(&quot;x&quot;) = 7) | (loopindex(&quot;x&quot;) = 9)</param>
                                            <param id="1" name="Comparison">1</param>
                                            <param id="2" name="Second value">0</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-3" name="Create object" sid="4399439939370041" type="System">
                                            <param id="0" name="Object to create">Dot</param>
                                            <param id="1" name="Layer">0</param>
                                            <param id="2" name="X">(loopindex(&quot;x&quot;)-0.5)*FRAME_LONG</param>
                                            <param id="3" name="Y">(loopindex(&quot;y&quot;)-0.5)*FRAME_LONG</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <comment>Destroy any dot that overlaps a power pill</comment>
                                <event-block sid="2606444838620999">
                                    <conditions>
                                        <condition id="1" name="Is overlapping another object" sid="815068813090561" type="Dot">
                                            <param id="0" name="Object">PowerPill</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Destroy" sid="6949408513626736" type="Dot" />
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-block>
    </events>
</c2eventsheet>
